<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpportunityHub - Find Your Next Challenge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #ffd166;
            --danger: #ef476f;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .auth-buttons button {
            background-color: white;
            color: var(--primary);
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .auth-buttons button:hover {
            background-color: var(--light);
            transform: translateY(-2px);
        }
        
        /* Auth Modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .auth-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .auth-tab.active {
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
            color: var(--primary);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .auth-form button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .auth-form button:hover {
            background-color: var(--secondary);
        }
        
        .auth-error {
            color: var(--danger);
            margin-top: 1rem;
            text-align: center;
            display: none;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(67, 97, 238, 0.9), rgba(58, 12, 163, 0.9)), url('https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }
        
        .search-bar {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
        }
        
        .search-bar input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 4px 0 0 4px;
            font-size: 1rem;
        }
        
        .search-bar button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        /* Filters Section */
        .filters {
            background-color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin: -30px auto 30px;
            position: relative;
            max-width: 1000px;
            z-index: 10;
        }
        
        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            background-color: var(--light);
        }
        
        .filter-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .filter-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .apply-btn {
            background-color: var(--primary);
            color: white;
        }
        
        .reset-btn {
            background-color: var(--light-gray);
            color: var(--dark);
        }
        
        /* Opportunities Grid */
        .opportunities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin: 2rem 0;
        }
        
        .opportunity-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .opportunity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .opportunity-type {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .internship {
            background-color: #e6f7ff;
            color: #0066cc;
        }
        
        .research {
            background-color: #e6f2ff;
            color: #003399;
        }
        
        .summer {
            background-color: #fff0e6;
            color: #cc4400;
        }
        
        .card-header h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        
        .organization {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .detail {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .detail i {
            width: 24px;
            color: var(--primary);
            margin-right: 10px;
        }
        
        .deadline {
            color: var(--danger);
            font-weight: 600;
        }
        
        .card-footer {
            padding: 1rem 1.5rem;
            background-color: var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .save-btn {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }
        
        .save-btn:hover, .save-btn.saved {
            color: var(--accent);
        }
        
        .apply-link {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            background-color: rgba(67, 97, 238, 0.1);
            transition: all 0.3s ease;
        }
        
        .apply-link:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Dashboard */
        .dashboard {
            display: none;
            margin: 2rem 0;
        }
        
        .dashboard-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .dashboard-tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
        }
        
        .dashboard-tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .dashboard-content {
            display: none;
        }
        
        .dashboard-content.active {
            display: block;
        }
        
        .dashboard-opportunities {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        /* Opportunity Details Modal */
        .details-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .details-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 100%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border-left: 4px solid var(--success);
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            color: var(--success);
            font-size: 1.5rem;
            margin-right: 10px;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--accent);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc;
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            .auth-buttons {
                margin-top: 1rem;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .filter-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-rocket"></i>
                <span>OpportunityHub</span>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" class="nav-home">Home</a></li>
                    <li><a href="#" class="nav-opportunities">Opportunities</a></li>
                    <li><a href="#" class="nav-dashboard">Dashboard</a></li>
                    <li><a href="#">Resources</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons">
                <button id="loginBtn">Sign In</button>
                <button id="signupBtn">Sign Up</button>
                <button id="logoutBtn" style="display: none;">Logout</button>
            </div>
        </div>
    </header>
    
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="signup">Sign Up</div>
            </div>
            
            <div class="auth-form active" id="loginForm">
                <input type="email" id="loginEmail" placeholder="Email">
                <input type="password" id="loginPassword" placeholder="Password">
                <button id="doLogin">Login</button>
                <div class="auth-error" id="loginError"></div>
            </div>
            
            <div class="auth-form" id="signupForm">
                <input type="text" id="signupName" placeholder="Full Name">
                <input type="email" id="signupEmail" placeholder="Email">
                <input type="password" id="signupPassword" placeholder="Password">
                <input type="password" id="signupConfirm" placeholder="Confirm Password">
                <button id="doSignup">Sign Up</button>
                <div class="auth-error" id="signupError"></div>
            </div>
        </div>
    </div>
    
    <!-- Opportunity Details Modal -->
    <div class="details-modal" id="detailsModal">
        <div class="details-content">
            <button class="close-modal" id="closeDetails">&times;</button>
            <div id="detailsContent"></div>
        </div>
    </div>
    
    <!-- Hero Section -->
    <section class="hero" id="heroSection">
        <div class="container">
            <h1>Find Your Next Challenge</h1>
            <p>Discover internships, research opportunities, and summer programs to build your portfolio and boost your career</p>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search opportunities by keyword, field, or organization...">
                <button id="searchBtn"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </section>
    
    <!-- Main Content -->
    <main class="container">
        <!-- Filters -->
        <section class="filters" id="filtersSection">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="field">Field of Interest</label>
                    <select id="field">
                        <option value="">All Fields</option>
                        <option value="stem">STEM</option>
                        <option value="business">Business & Finance</option>
                        <option value="arts">Arts & Design</option>
                        <option value="social">Social Sciences</option>
                        <option value="health">Health & Medicine</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="type">Opportunity Type</label>
                    <select id="type">
                        <option value="">All Types</option>
                        <option value="internship">Internship</option>
                        <option value="research">Research</option>
                        <option value="summer">Summer Program</option>
                        <option value="volunteer">Volunteer</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="compensation">Compensation</label>
                    <select id="compensation">
                        <option value="">Any</option>
                        <option value="paid">Paid</option>
                        <option value="unpaid">Unpaid</option>
                        <option value="stipend">Stipend</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-row">
                <div class="filter-group">
                    <label for="deadline">Deadline Within</label>
                    <select id="deadline">
                        <option value="">Any Time</option>
                        <option value="week">1 Week</option>
                        <option value="month">1 Month</option>
                        <option value="3months">3 Months</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="impact">Impact Level</label>
                    <select id="impact">
                        <option value="">Any Impact</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="location">Location</label>
                    <select id="location">
                        <option value="">Any Location</option>
                        <option value="remote">Remote</option>
                        <option value="onsite">On-site</option>
                        <option value="hybrid">Hybrid</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-actions">
                <button class="reset-btn" id="resetFilters">Reset Filters</button>
                <button class="apply-btn" id="applyFilters">Apply Filters</button>
            </div>
        </section>
        
        <!-- Opportunities Grid -->
        <h2 id="opportunitiesTitle">Featured Opportunities</h2>
        <div class="opportunities-grid" id="opportunitiesGrid">
            <!-- Opportunity cards will be dynamically inserted here -->
        </div>
        
        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <h2>My Dashboard</h2>
            
            <div class="dashboard-tabs">
                <div class="dashboard-tab active" data-tab="pending">Pending Opportunities</div>
                <div class="dashboard-tab" data-tab="completed">Completed</div>
            </div>
            
            <div class="dashboard-content active" id="pendingContent">
                <div class="dashboard-opportunities" id="pendingOpportunities">
                    <p>You haven't saved any opportunities yet. Browse opportunities and save them to your dashboard.</p>
                </div>
            </div>
            
            <div class="dashboard-content" id="completedContent">
                <div class="dashboard-opportunities" id="completedOpportunities">
                    <p>You haven't completed any opportunities yet.</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-bell"></i>
        <div class="notification-content">
            <h4>Deadline Approaching</h4>
            <p>You have 3 opportunities with deadlines in the next week.</p>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>About OpportunityHub</h3>
                <p>We connect high school students with meaningful opportunities to build their portfolios and gain real-world experience.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#">Browse Opportunities</a></li>
                    <li><a href="#">Post an Opportunity</a></li>
                    <li><a href="#">Success Stories</a></li>
                    <li><a href="#">Upcoming Deadlines</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <ul class="footer-links">
                    <li><a href="#">Application Tips</a></li>
                    <li><a href="#">Resume Builder</a></li>
                    <li><a href="#">Interview Preparation</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Contact Us</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-envelope"></i> contact@opportunityhub.com</a></li>
                    <li><a href="#"><i class="fas fa-phone"></i> (555) 123-4567</a></li>
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> New York, NY</a></li>
                </ul>
            </div>
        </div>
        
        <div class="container copyright">
            <p>&copy; 2023 OpportunityHub. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase App (core SDK is always required) -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";
        import { getDatabase, ref, set, get, child, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDEFumFatqFMn29D1x9f-_WWiVh2F_aVtQ",
            authDomain: "youthaxis-16bab.firebaseapp.com",
            projectId: "youthaxis-16bab",
            storageBucket: "youthaxis-16bab.firebasestorage.app",
            messagingSenderId: "287063568472",
            appId: "1:287063568472:web:9209a3a4a82407d63e9a2d",
            measurementId: "G-7M9QET4FLZ",
            databaseURL: "https://youthaxis-16bab-default-rtdb.firebaseio.com/"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const authModal = document.getElementById('authModal');
        const authTabs = document.querySelectorAll('.auth-tab');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const doLogin = document.getElementById('doLogin');
        const doSignup = document.getElementById('doSignup');
        const loginError = document.getElementById('loginError');
        const signupError = document.getElementById('signupError');
        const notification = document.getElementById('notification');
        const opportunitiesGrid = document.getElementById('opportunitiesGrid');
        const dashboard = document.getElementById('dashboard');
        const navDashboard = document.querySelector('.nav-dashboard');
        const navHome = document.querySelector('.nav-home');
        const navOpportunities = document.querySelector('.nav-opportunities');
        const heroSection = document.getElementById('heroSection');
        const filtersSection = document.getElementById('filtersSection');
        const opportunitiesTitle = document.getElementById('opportunitiesTitle');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const applyFiltersBtn = document.getElementById('applyFilters');
        const resetFiltersBtn = document.getElementById('resetFilters');
        const detailsModal = document.getElementById('detailsModal');
        const detailsContent = document.getElementById('detailsContent');
        const closeDetails = document.getElementById('closeDetails');
        const pendingOpportunities = document.getElementById('pendingOpportunities');
        const completedOpportunities = document.getElementById('completedOpportunities');
        const dashboardTabs = document.querySelectorAll('.dashboard-tab');

        // Sample opportunities data
        const opportunities = [
            {
                id: 'opp1',
                type: 'internship',
                title: 'Software Development Intern',
                organization: 'Tech Innovations Inc.',
                paid: true,
                rate: '$25/hr',
                location: 'Remote',
                deadline: '2023-06-15',
                impact: 'High',
                description: 'Gain real-world experience in software development while working with a talented team on cutting-edge projects.',
                fullDescription: 'This internship offers hands-on experience in software development. You will work with our engineering team to develop new features, fix bugs, and participate in code reviews. Ideal for students interested in computer science, software engineering, or related fields.',
                requirements: 'Basic knowledge of JavaScript, HTML, and CSS. Familiarity with React is a plus.',
                duration: '3 months',
                applyLink: 'https://techinnovations.com/careers/internships'
            },
            {
                id: 'opp2',
                type: 'research',
                title: 'Environmental Science Research',
                organization: 'University of Science',
                paid: false,
                stipend: '$2,000',
                location: 'On-site',
                deadline: '2023-05-30',
                impact: 'Medium',
                description: 'Join our research team studying climate change impacts on local ecosystems. Perfect for students interested in environmental science.',
                fullDescription: 'This research opportunity allows you to work alongside professors and graduate students studying the effects of climate change on local ecosystems. You will participate in field work, data collection, and analysis.',
                requirements: 'Interest in environmental science. Previous lab experience is beneficial but not required.',
                duration: '2 months',
                applyLink: 'https://universityscience.edu/research/opportunities'
            },
            {
                id: 'opp3',
                type: 'summer',
                title: 'Business Leadership Academy',
                organization: 'Global Business Institute',
                paid: false,
                location: 'Hybrid',
                deadline: '2023-04-20',
                impact: 'High',
                description: 'Develop leadership skills and business acumen through this intensive 4-week summer program. Networking opportunities with industry leaders.',
                fullDescription: 'The Business Leadership Academy is a selective program for high school students interested in business and leadership. Through workshops, case studies, and mentorship, you will develop essential skills for future success.',
                requirements: 'Open to all high school students. Application includes essay and teacher recommendation.',
                duration: '4 weeks',
                applyLink: 'https://globalbusinessinstitute.org/leadership-academy'
            },
            {
                id: 'opp4',
                type: 'internship',
                title: 'Graphic Design Intern',
                organization: 'Creative Solutions Agency',
                paid: true,
                rate: '$20/hr',
                location: 'Remote',
                deadline: '2023-07-01',
                impact: 'Medium',
                description: 'Work with our design team to create visual content for clients. Build your portfolio with real-world projects.',
                fullDescription: 'As a Graphic Design Intern, you will collaborate with our creative team to develop visual content for various clients. You will gain experience in branding, social media graphics, and marketing materials.',
                requirements: 'Proficiency in Adobe Creative Suite. Portfolio of design work required.',
                duration: '3 months',
                applyLink: 'https://creativesolutionsagency.com/internships'
            },
            {
                id: 'opp5',
                type: 'research',
                title: 'Neuroscience Research Assistant',
                organization: 'City Medical Center',
                paid: false,
                stipend: '$1,500',
                location: 'On-site',
                deadline: '2023-06-05',
                impact: 'High',
                description: 'Assist with cutting-edge neuroscience research. Ideal for students interested in medicine, psychology, or biology.',
                fullDescription: 'This research assistant position involves supporting our neuroscience team with ongoing studies. Responsibilities may include literature reviews, data entry, and assisting with experiments.',
                requirements: 'Background in biology or psychology preferred. Must be detail-oriented and organized.',
                duration: '2 months',
                applyLink: 'https://citymedicalcenter.org/research/opportunities'
            },
            {
                id: 'opp6',
                type: 'summer',
                title: 'Computer Science Summer Institute',
                organization: 'Tech Education Foundation',
                paid: false,
                scholarship: true,
                location: 'On-site',
                deadline: '2023-05-15',
                impact: 'High',
                description: 'Intensive 4-week program focused on coding, algorithms, and software development. No prior experience required.',
                fullDescription: 'Our Computer Science Summer Institute introduces students to programming fundamentals, algorithms, and web development. Through hands-on projects, you will build a portfolio of work to showcase your skills.',
                requirements: 'No prior experience required. Open to all high school students.',
                duration: '4 weeks',
                applyLink: 'https://techeducationfoundation.org/summer-institute'
            }
        ];

        // Current filtered opportunities
        let filteredOpportunities = [...opportunities];
        // User's saved opportunities
        let userOpportunities = {
            pending: [],
            completed: []
        };

        // Event Listeners
        loginBtn.addEventListener('click', () => showAuthModal('login'));
        signupBtn.addEventListener('click', () => showAuthModal('signup'));
        logoutBtn.addEventListener('click', handleLogout);
        
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                switchAuthTab(tabName);
            });
        });
        
        doLogin.addEventListener('click', handleLogin);
        doSignup.addEventListener('click', handleSignup);
        
        navDashboard.addEventListener('click', (e) => {
            e.preventDefault();
            showDashboard();
        });
        
        navHome.addEventListener('click', (e) => {
            e.preventDefault();
            showHome();
        });
        
        navOpportunities.addEventListener('click', (e) => {
            e.preventDefault();
            showOpportunities();
        });

        searchBtn.addEventListener('click', applySearchFilter);
        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') applySearchFilter();
        });

        applyFiltersBtn.addEventListener('click', applyFilters);
        resetFiltersBtn.addEventListener('click', resetFilters);

        closeDetails.addEventListener('click', () => {
            detailsModal.style.display = 'none';
        });

        dashboardTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                switchDashboardTab(tabName);
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === authModal) {
                authModal.style.display = 'none';
            }
            if (e.target === detailsModal) {
                detailsModal.style.display = 'none';
            }
        });

        // Check auth state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                loginBtn.style.display = 'none';
                signupBtn.style.display = 'none';
                logoutBtn.style.display = 'block';
                
                // Load user's saved opportunities
                loadUserOpportunities(user.uid);
            } else {
                // User is signed out
                loginBtn.style.display = 'block';
                signupBtn.style.display = 'block';
                logoutBtn.style.display = 'none';
                
                // Hide dashboard if user is not logged in
                dashboard.style.display = 'none';
            }
        });

        // Initialize the app
        function initApp() {
            renderOpportunities();
            checkDeadlines();
        }

        // Render opportunities to the grid
        function renderOpportunities() {
            opportunitiesGrid.innerHTML = '';
            
            if (filteredOpportunities.length === 0) {
                opportunitiesGrid.innerHTML = '<p class="no-results">No opportunities match your filters. Try adjusting your search criteria.</p>';
                return;
            }
            
            filteredOpportunities.forEach(opp => {
                const isSaved = userOpportunities.pending.some(item => item.id === opp.id) || 
                               userOpportunities.completed.some(item => item.id === opp.id);
                
                const opportunityCard = document.createElement('div');
                opportunityCard.className = 'opportunity-card';
                opportunityCard.innerHTML = `
                    <div class="card-header">
                        <span class="opportunity-type ${opp.type}">${getOpportunityTypeText(opp.type)}</span>
                        <h3>${opp.title}</h3>
                        <p class="organization">${opp.organization}</p>
                    </div>
                    
                    <div class="card-body">
                        <div class="detail">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>${getCompensationText(opp)}</span>
                        </div>
                        <div class="detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${opp.location}</span>
                        </div>
                        <div class="detail">
                            <i class="fas fa-calendar-alt"></i>
                            <span class="deadline">Deadline: ${formatDate(opp.deadline)}</span>
                        </div>
                        <div class="detail">
                            <i class="fas fa-chart-line"></i>
                            <span>Impact: ${opp.impact}</span>
                        </div>
                        <p>${opp.description}</p>
                    </div>
                    
                    <div class="card-footer">
                        <button class="save-btn ${isSaved ? 'saved' : ''}" data-id="${opp.id}" title="Save to dashboard">
                            <i class="${isSaved ? 'fas' : 'far'} fa-bookmark"></i>
                        </button>
                        <a href="#" class="apply-link" data-id="${opp.id}">View Details & Apply</a>
                    </div>
                `;
                
                opportunitiesGrid.appendChild(opportunityCard);
            });
            
            // Add event listeners to save buttons
            const saveButtons = document.querySelectorAll('.save-btn');
            saveButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const user = auth.currentUser;
                    if (user) {
                        const oppId = this.getAttribute('data-id');
                        const opportunity = opportunities.find(opp => opp.id === oppId);
                        if (this.classList.contains('saved')) {
                            removeOpportunity(user.uid, opportunity);
                        } else {
                            saveOpportunity(user.uid, opportunity);
                        }
                    } else {
                        showAuthModal('login');
                        showNotification('Please sign in to save opportunities');
                    }
                });
            });
            
            // Add event listeners to detail buttons
            const detailButtons = document.querySelectorAll('.apply-link');
            detailButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const oppId = this.getAttribute('data-id');
                    const opportunity = opportunities.find(opp => opp.id === oppId);
                    showOpportunityDetails(opportunity);
                });
            });
        }

        // Show opportunity details
        function showOpportunityDetails(opportunity) {
            detailsContent.innerHTML = `
                <h2>${opportunity.title}</h2>
                <p class="organization">${opportunity.organization}</p>
                <div class="detail">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>${getCompensationText(opportunity)}</span>
                </div>
                <div class="detail">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>${opportunity.location}</span>
                </div>
                <div class="detail">
                    <i class="fas fa-calendar-alt"></i>
                    <span class="deadline">Deadline: ${formatDate(opportunity.deadline)}</span>
                </div>
                <div class="detail">
                    <i class="fas fa-chart-line"></i>
                    <span>Impact: ${opportunity.impact}</span>
                </div>
                <h3>Description</h3>
                <p>${opportunity.fullDescription}</p>
                <h3>Requirements</h3>
                <p>${opportunity.requirements}</p>
                <h3>Duration</h3>
                <p>${opportunity.duration}</p>
                <div style="margin-top: 2rem; text-align: center;">
                    <a href="${opportunity.applyLink}" target="_blank" class="btn" style="display: inline-block;">Apply Now</a>
                </div>
            `;
            detailsModal.style.display = 'flex';
        }

        // Get opportunity type text
        function getOpportunityTypeText(type) {
            switch(type) {
                case 'internship': return 'Internship';
                case 'research': return 'Research';
                case 'summer': return 'Summer Program';
                default: return type;
            }
        }

        // Get compensation text
        function getCompensationText(opp) {
            if (opp.paid) return `Paid - ${opp.rate}`;
            if (opp.stipend) return `Stipend - ${opp.stipend}`;
            if (opp.scholarship) return 'Scholarship Available';
            return 'Unpaid';
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Show auth modal
        function showAuthModal(tab) {
            authModal.style.display = 'flex';
            switchAuthTab(tab);
        }

        // Switch auth tab
        function switchAuthTab(tabName) {
            // Update tabs
            authTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update forms
            if (tabName === 'login') {
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
            } else {
                loginForm.classList.remove('active');
                signupForm.classList.add('active');
            }
            
            // Clear errors
            loginError.style.display = 'none';
            signupError.style.display = 'none';
        }

        // Handle login
        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    authModal.style.display = 'none';
                    showNotification('Successfully logged in!');
                })
                .catch((error) => {
                    loginError.textContent = error.message;
                    loginError.style.display = 'block';
                });
        }

        // Handle signup
        function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirm = document.getElementById('signupConfirm').value;
            
            // Basic validation
            if (password !== confirm) {
                signupError.textContent = 'Passwords do not match';
                signupError.style.display = 'block';
                return;
            }
            
            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed up 
                    const user = userCredential.user;
                    
                    // Save user profile
                    set(ref(database, 'users/' + user.uid), {
                        name: name,
                        email: email,
                        createdAt: new Date().toISOString()
                    });
                    
                    authModal.style.display = 'none';
                    showNotification('Account created successfully!');
                })
                .catch((error) => {
                    signupError.textContent = error.message;
                    signupError.style.display = 'block';
                });
        }

        // Handle logout
        function handleLogout() {
            signOut(auth)
                .then(() => {
                    showNotification('Successfully logged out');
                })
                .catch((error) => {
                    console.error('Logout error:', error);
                });
        }

        // Save opportunity to user's dashboard
        function saveOpportunity(userId, opportunity) {
            const userOppRef = ref(database, `userOpportunities/${userId}/${opportunity.id}`);
            
            set(userOppRef, {
                ...opportunity,
                savedAt: new Date().toISOString(),
                status: 'pending'
            })
            .then(() => {
                showNotification('Opportunity saved to your dashboard!');
                userOpportunities.pending.push(opportunity);
                renderOpportunities();
                renderDashboardOpportunities();
            })
            .catch((error) => {
                console.error('Error saving opportunity:', error);
            });
        }

        // Remove opportunity from user's dashboard
        function removeOpportunity(userId, opportunity) {
            const userOppRef = ref(database, `userOpportunities/${userId}/${opportunity.id}`);
            
            remove(userOppRef)
            .then(() => {
                showNotification('Opportunity removed from your dashboard');
                userOpportunities.pending = userOpportunities.pending.filter(opp => opp.id !== opportunity.id);
                userOpportunities.completed = userOpportunities.completed.filter(opp => opp.id !== opportunity.id);
                renderOpportunities();
                renderDashboardOpportunities();
            })
            .catch((error) => {
                console.error('Error removing opportunity:', error);
            });
        }

        // Load user's saved opportunities
        function loadUserOpportunities(userId) {
            const userOppRef = ref(database, `userOpportunities/${userId}`);
            
            onValue(userOppRef, (snapshot) => {
                const data = snapshot.val();
                userOpportunities.pending = [];
                userOpportunities.completed = [];
                
                if (data) {
                    for (const key in data) {
                        if (data[key].status === 'completed') {
                            userOpportunities.completed.push(data[key]);
                        } else {
                            userOpportunities.pending.push(data[key]);
                        }
                    }
                }
                
                renderOpportunities();
                renderDashboardOpportunities();
            });
        }

        // Render dashboard opportunities
        function renderDashboardOpportunities() {
            // Render pending opportunities
            if (userOpportunities.pending.length === 0) {
                pendingOpportunities.innerHTML = '<p>You haven\'t saved any opportunities yet. Browse opportunities and save them to your dashboard.</p>';
            } else {
                pendingOpportunities.innerHTML = '';
                userOpportunities.pending.forEach(opp => {
                    const oppElement = createDashboardOpportunityElement(opp, 'pending');
                    pendingOpportunities.appendChild(oppElement);
                });
            }
            
            // Render completed opportunities
            if (userOpportunities.completed.length === 0) {
                completedOpportunities.innerHTML = '<p>You haven\'t completed any opportunities yet.</p>';
            } else {
                completedOpportunities.innerHTML = '';
                userOpportunities.completed.forEach(opp => {
                    const oppElement = createDashboardOpportunityElement(opp, 'completed');
                    completedOpportunities.appendChild(oppElement);
                });
            }
        }

        // Create dashboard opportunity element
        function createDashboardOpportunityElement(opportunity, status) {
            const element = document.createElement('div');
            element.className = 'opportunity-card';
            element.innerHTML = `
                <div class="card-header">
                    <span class="opportunity-type ${opportunity.type}">${getOpportunityTypeText(opportunity.type)}</span>
                    <h3>${opportunity.title}</h3>
                    <p class="organization">${opportunity.organization}</p>
                </div>
                
                <div class="card-body">
                    <div class="detail">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>${getCompensationText(opportunity)}</span>
                    </div>
                    <div class="detail">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${opportunity.location}</span>
                    </div>
                    <div class="detail">
                        <i class="fas fa-calendar-alt"></i>
                        <span class="deadline">Deadline: ${formatDate(opportunity.deadline)}</span>
                    </div>
                    <div class="detail">
                        <i class="fas fa-chart-line"></i>
                        <span>Impact: ${opportunity.impact}</span>
                    </div>
                    <p>${opportunity.description}</p>
                </div>
                
                <div class="card-footer">
                    <button class="save-btn saved" data-id="${opportunity.id}" title="Remove from dashboard">
                        <i class="fas fa-bookmark"></i>
                    </button>
                    ${status === 'pending' ? 
                    `<button class="apply-link complete-btn" data-id="${opportunity.id}">Mark as Complete</button>` : 
                    `<span class="completed-badge">Completed</span>`}
                </div>
            `;
            
            // Add event listener to remove button
            const removeBtn = element.querySelector('.save-btn');
            removeBtn.addEventListener('click', function() {
                const user = auth.currentUser;
                if (user) {
                    removeOpportunity(user.uid, opportunity);
                }
            });
            
            // Add event listener to complete button
            if (status === 'pending') {
                const completeBtn = element.querySelector('.complete-btn');
                completeBtn.addEventListener('click', function() {
                    const user = auth.currentUser;
                    if (user) {
                        markAsComplete(user.uid, opportunity);
                    }
                });
            }
            
            return element;
        }

        // Mark opportunity as complete
        function markAsComplete(userId, opportunity) {
            const userOppRef = ref(database, `userOpportunities/${userId}/${opportunity.id}`);
            
            update(userOppRef, {
                status: 'completed',
                completedAt: new Date().toISOString()
            })
            .then(() => {
                showNotification('Opportunity marked as complete!');
                // Move from pending to completed
                userOpportunities.pending = userOpportunities.pending.filter(opp => opp.id !== opportunity.id);
                userOpportunities.completed.push({...opportunity, status: 'completed'});
                renderDashboardOpportunities();
            })
            .catch((error) => {
                console.error('Error updating opportunity:', error);
            });
        }

        // Apply filters
        function applyFilters() {
            const fieldFilter = document.getElementById('field').value;
            const typeFilter = document.getElementById('type').value;
            const compensationFilter = document.getElementById('compensation').value;
            const deadlineFilter = document.getElementById('deadline').value;
            const impactFilter = document.getElementById('impact').value;
            const locationFilter = document.getElementById('location').value;
            
            filteredOpportunities = opportunities.filter(opp => {
                // Field filter
                if (fieldFilter && opp.field !== fieldFilter) return false;
                
                // Type filter
                if (typeFilter && opp.type !== typeFilter) return false;
                
                // Compensation filter
                if (compensationFilter === 'paid' && !opp.paid) return false;
                if (compensationFilter === 'unpaid' && (opp.paid || opp.stipend || opp.scholarship)) return false;
                if (compensationFilter === 'stipend' && !opp.stipend) return false;
                
                // Impact filter
                if (impactFilter && opp.impact.toLowerCase() !== impactFilter.toLowerCase()) return false;
                
                // Location filter
                if (locationFilter && opp.location.toLowerCase() !== locationFilter.toLowerCase()) return false;
                
                // Deadline filter (simplified for demo)
                if (deadlineFilter) {
                    const today = new Date();
                    const oppDeadline = new Date(opp.deadline);
                    const diffTime = Math.abs(oppDeadline - today);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (deadlineFilter === 'week' && diffDays > 7) return false;
                    if (deadlineFilter === 'month' && diffDays > 30) return false;
                    if (deadlineFilter === '3months' && diffDays > 90) return false;
                }
                
                return true;
            });
            
            renderOpportunities();
            showNotification(`Found ${filteredOpportunities.length} opportunities matching your filters`);
        }

        // Apply search filter
        function applySearchFilter() {
            const searchTerm = searchInput.value.toLowerCase();
            
            if (!searchTerm) {
                filteredOpportunities = [...opportunities];
            } else {
                filteredOpportunities = opportunities.filter(opp => {
                    return (
                        opp.title.toLowerCase().includes(searchTerm) ||
                        opp.organization.toLowerCase().includes(searchTerm) ||
                        opp.description.toLowerCase().includes(searchTerm) ||
                        opp.type.toLowerCase().includes(searchTerm)
                    );
                });
            }
            
            renderOpportunities();
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('field').value = '';
            document.getElementById('type').value = '';
            document.getElementById('compensation').value = '';
            document.getElementById('deadline').value = '';
            document.getElementById('impact').value = '';
            document.getElementById('location').value = '';
            searchInput.value = '';
            
            filteredOpportunities = [...opportunities];
            renderOpportunities();
            showNotification('Filters reset');
        }

        // Check for approaching deadlines
        function checkDeadlines() {
            // This would check the user's saved opportunities for deadlines
            // and show notifications for approaching deadlines
            
            // For demo purposes, we'll just show a notification after 2 seconds
            setTimeout(() => {
                showNotification('You have 3 opportunities with deadlines in the next week.');
            }, 2000);
        }

        // Show notification
        function showNotification(message) {
            if (message) {
                const notificationContent = notification.querySelector('.notification-content');
                notificationContent.innerHTML = `
                    <h4>Notification</h4>
                    <p>${message}</p>
                `;
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Show dashboard
        function showDashboard() {
            const user = auth.currentUser;
            if (user) {
                heroSection.style.display = 'none';
                filtersSection.style.display = 'none';
                opportunitiesTitle.style.display = 'none';
                opportunitiesGrid.style.display = 'none';
                dashboard.style.display = 'block';
            } else {
                showAuthModal('login');
                showNotification('Please sign in to view your dashboard');
            }
        }

        // Show home page
        function showHome() {
            heroSection.style.display = 'block';
            filtersSection.style.display = 'block';
            opportunitiesTitle.style.display = 'block';
            opportunitiesGrid.style.display = 'grid';
            dashboard.style.display = 'none';
        }

        // Show opportunities page
        function showOpportunities() {
            heroSection.style.display = 'none';
            filtersSection.style.display = 'block';
            opportunitiesTitle.style.display = 'block';
            opportunitiesGrid.style.display = 'grid';
            dashboard.style.display = 'none';
            
            // Scroll to opportunities
            window.scrollTo({
                top: filtersSection.offsetTop - 100,
                behavior: 'smooth'
            });
        }

        // Switch dashboard tab
        function switchDashboardTab(tabName) {
            // Update tabs
            dashboardTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update content
            if (tabName === 'pending') {
                document.getElementById('pendingContent').classList.add('active');
                document.getElementById('completedContent').classList.remove('active');
            } else {
                document.getElementById('pendingContent').classList.remove('active');
                document.getElementById('completedContent').classList.add('active');
            }
        }

        // Initialize the app
        initApp();
    </script>
</body>
</html>
